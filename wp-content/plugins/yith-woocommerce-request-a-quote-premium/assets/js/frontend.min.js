jQuery(document).ready((function(e){"use strict";e("body"),e(".add-request-quote-button");var t=e(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote"),a="undefined"!=typeof ywraq_frontend&&ywraq_frontend.block_loader,i="undefined"!=typeof ywraq_frontend&&ywraq_frontend.allow_out_of_stock,n="undefined"!=typeof ywraq_frontend&&ywraq_frontend.allow_only_on_out_of_stock,o=(e(".yith-ywraq-item-remove"),e(".shipping_address")),r=e(".woocommerce-billing-fields"),d=document.location.href,s=e(document).find("#yith-ywrq-table-list");i="yes"==i,n="yes"==n,s.length>0&&ywraq_frontend.raq_table_refresh_check&&e.post(d,(function(t){if(""!=t){var a=e("<div></div>").html(t).find("#yith-ywrq-table-list");e("#yith-ywrq-table-list").html(a.html()),e(document).trigger("ywraq_table_reloaded")}})),e.fn.yith_ywraq_variations=function(){var t=e(document).find("form.variations_form");if(t.length&&void 0!==t.data("product_id")){var a=t.data("product_id").toString().replace(/[^0-9]/g,""),o=e(".add-to-quote-"+a).find(".yith-ywraq-add-button"),r=o.find("a.add-request-quote-button"),d=e(".yith_ywraq_add_item_product-response-"+a),s=e(".yith_ywraq_add_item_response-"+a),_=e(".yith_ywraq_add_item_browse-list-"+a),c=function(){r.show().addClass("disabled"),o.show().removeClass("hide").removeClass("addedd"),d.hide().removeClass("show"),s.hide().removeClass("show"),_.hide().removeClass("show"),(n&&i||n)&&r.hide()};t.on("found_variation",(function(t,c){var l=""+e(".add-to-quote-"+a).attr("data-variation"),u=!0;d.hide().removeClass("show"),i?n&&c.is_in_stock&&(u=!1):c.is_in_stock||(u=!1),u?(r.show().removeClass("disabled"),o.show().removeClass("hide").removeClass("addedd"),s.hide().removeClass("show"),_.hide().removeClass("show")):(r.hide().addClass("disabled"),o.hide().removeClass("show").removeClass("addedd"),s.hide().removeClass("show"),_.hide().removeClass("show")),-1!==l.indexOf(""+c.variation_id)&&u?(r.hide(),s.show().removeClass("hide"),_.show().removeClass("hide")):u&&(r.show().removeClass("disabled"),o.show().removeClass("hide").removeClass("addedd"),s.hide().removeClass("show"),_.hide().removeClass("show"))})),t.on("reset_data",(function(e){c()})),c()}},e(".variations_form").each((function(){e(this).yith_ywraq_variations()})),e(document).on("qv_loader_stop",(function(t){e(".variations_form").each((function(){e(this).yith_ywraq_variations()}))})),e.fn.yith_ywraq_refresh_button=function(){var t=e('[name|="product_id"]').val();e(".add-to-quote-"+t).find("a.add-request-quote-button").parents(".yith-ywraq-add-to-quote");if(!e('[name|="variation_id"]').length)return!1},e.fn.yith_ywraq_refresh_button();var _=!1;e(document).on("click",".add-request-quote-button",(function(i){i.preventDefault();var n=e(this),o=n.closest(".yith-ywraq-add-to-quote"),r="ac",d="";if(n.hasClass("outofstock")?window.alert(ywraq_frontend.i18n_out_of_stock):n.hasClass("disabled")&&window.alert(ywraq_frontend.i18n_choose_a_variation),!(n.hasClass("disabled")||n.hasClass("outofstock")||_)){if(e(".grouped_form").length){var s=0;if(e(".grouped_form input.qty").each((function(){s=Math.floor(e(this).val())+s})),0==s)return void alert(ywraq_frontend.select_quantity)}if(void 0===(d=n.closest(".cart").length?n.closest(".cart"):o.siblings(".cart").first().length?o.siblings(".cart").first():e(".composite_form").length?e(".composite_form"):e(".cart:not(.in_loop)"))[0]||"function"!=typeof d[0].checkValidity||d[0].checkValidity()){if(n.closest("ul.products").length>0)var l="",u=(y=n.closest("li.product").find("a.add_to_cart_button")).data("product_id");else{l=n.closest(".product").find('input[name="add-to-cart"]');var y=n.closest(".product").find('input[name="product_id"]');u=n.data("product_id")||(y.length?y.val():l.val())}var h=void 0===u?n.data("product_id"):u;(r=d.serializefiles()).append("context","frontend"),r.append("action","yith_ywraq_action"),r.append("ywraq_action","add_item"),r.append("product_id",n.data("product_id")),r.append("wp_nonce",n.data("wp_nonce")),r.append("yith-add-to-cart",n.data("product_id"));var f=o.find("input.quote_qty").val();if(f=e(".js_ysg_quote_qty").val(),alert(f),f>0&&r.append("quantity",f),n.closest(".yith_wc_qof_button_and_price").length>0){var w=n.closest(".yith_wc_qof_button_and_price").find(".YITH_WC_QOF_Quantity_Cart").val();r.append("quantity",w)}var m=n.closest("li.product").find(".variations_form.in_loop"),p=!!m.length&&m.data("active_variation");return p&&(r.append("variation_id",p),m.find("select").each((function(){r.append(this.name,this.value)}))),e(document).trigger("yith_ywraq_action_before"),!("undefined"!=typeof yith_wapo_general&&!yith_wapo_general.do_submit)&&(!("undefined"!=typeof ywcnp_raq&&!ywcnp_raq.do_submit)&&void(_=e.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:r,contentType:!1,processData:!1,beforeSend:function(){n.after(' <img src="'+a+'" class="ywraq-loader" >')},complete:function(){n.next().remove()},success:function(a){"true"==a.result||"exists"==a.result?("yes"==ywraq_frontend.go_to_the_list?window.location.href=a.rqa_url:(e(".yith_ywraq_add_item_response-"+h).hide().addClass("hide").html(""),e(".yith_ywraq_add_item_product-response-"+h).show().removeClass("hide").html(a.message),e(".yith_ywraq_add_item_browse-list-"+h).show().removeClass("hide"),n.parent().hide().removeClass("show").addClass("addedd"),e(".add-to-quote-"+h).attr("data-variation",a.variations),t.length&&(t.ywraq_refresh_widget(),t=e(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),c()),e(document).trigger("yith_wwraq_added_successfully",[a])):"false"==a.result&&(e(".yith_ywraq_add_item_response-"+h).show().removeClass("hide").html(a.message),e(document).trigger("yith_wwraq_error_while_adding")),_=!1}})))}e('<input type="submit">').hide().appendTo(d).click().remove()}})),e.fn.serializefiles=function(){var t=e(this),a=new FormData;e.each(e(t).find("input[type='file']"),(function(t,i){e.each(e(i)[0].files,(function(e,t){a.append(i.name,t)}))}));var i=e(t).serializeArray(),n=!1;return e.each(i,(function(e,t){("quantity"==t.name||t.name.indexOf("quantity"))&&(n=!0),"add-to-cart"!=t.name&&a.append(t.name,encodeURIComponent(t.value))})),!1===n&&a.append("quantity",1),a},e.fn.ywraq_refresh_widget=function(){t.each((function(){var t=e(this),i=t.find(".yith-ywraq-list-wrapper"),n=t.find(".yith-ywraq-list"),o=t.find(".yith-ywraq-list-widget-wrapper").data("instance");e.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:o+"&ywraq_action=refresh_quote_list&action=yith_ywraq_action&context=frontend",beforeSend:function(){n.css("opacity",.5),t.hasClass("widget_ywraq_list_quote")&&i.prepend(' <img src="'+a+'" class="ywraq-loader">')},complete:function(){t.hasClass("widget_ywraq_list_quote")&&i.next().remove(),n.css("opacity",1)},success:function(a){t.hasClass("widget_ywraq_mini_list_quote")?t.find(".yith-ywraq-list-widget-wrapper").html(a.mini):t.find(".yith-ywraq-list-widget-wrapper").html(a.large),e(document).trigger("yith_ywraq_widget_refreshed")}})}))},e(document).on("click",".yith-ywraq-item-remove",(function(a){a.preventDefault();var i,n=e(this),o=n.data("remove-item"),r=n.parents(".ywraq-wrapper"),d=(e("#yith-ywraq-form"),r.find(".wpcf7-form")),s=r.find(".gform_wrapper"),_=n.data("product_id");i="context=frontend&action=yith_ywraq_action&ywraq_action=remove_item&key="+n.data("remove-item")+"&wp_nonce="+n.data("wp_nonce")+"&product_id="+_,e.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),dataType:"json",data:i,beforeSend:function(){n.find(".ajax-loading").css("visibility","visible")},complete:function(){n.siblings(".ajax-loading").css("visibility","hidden")},success:function(a){if(1===a){var i=e("[data-remove-item='"+o+"']").parents(".cart_item");if(i.hasClass("composite-parent")){var n=i.data("composite-id");e("[data-composite-id='"+n+"']").remove()}if(i.hasClass("yith-wapo-parent")){var r=i.find(".product-remove a").data("remove-item");e("[data-wapo_parent_key='"+r+"']").remove()}if(i.hasClass("ywcp_component_item")&&e("tr.ywcp_component_child_item").filter("[data-wcpkey='"+o+"']").remove(),i.hasClass("bundle-parent")){var l=i.data("bundle-key");e("[data-bundle-key='"+l+"']").remove()}i.remove(),0===e(".cart_item").length&&(d.length&&d.remove(),s.length&&s.remove(),e("#yith-ywraq-form, .yith-ywraq-mail-form-wrapper").remove(),e("#yith-ywraq-message").html(ywraq_frontend.no_product_in_list)),t.length&&(t.ywraq_refresh_widget(),t=e(document).find(".widget_ywraq_list_quote, .widget_ywraq_mini_list_quote")),c(),e(document).find('.hide-when-removed[data-product_id="'+_+'"]').hide(),e(document).find('.yith-ywraq-add-button[data-product_id="'+_+'"]').show(),e(document).trigger("yith_wwraq_removed_successfully")}else e(document).trigger("yith_wwraq_error_while_removing")}})}));function c(){e(document).find(".ywraq_number_items").each((function(){var t=e(this),a=t.data("show_url"),i=t.data("item_name"),n=t.data("item_plural_name");e.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_action"),data:"ywraq_action=refresh_number_items&action=yith_ywraq_action&context=frontend&item_name="+i+"&item_plural_name="+n+"&show_url="+a,success:function(a){t.replaceWith(a),e(document).trigger("ywraq_number_items_refreshed")}})}))}e(".wpcf7-submit").closest(".wpcf7").length>0&&e(document).find(".ywraq-wrapper .wpcf7").each((function(){var t=e(this);t.find('input[name="_wpcf7"]').val()==ywraq_frontend.cform7_id&&(t.on("wpcf7:mailsent",(function(){e.ajax({type:"POST",url:ywraq_frontend.ajaxurl.toString().replace("%%endpoint%%","yith_ywraq_order_action"),dataType:"json",data:{lang:ywraq_frontend.current_lang,action:"yith_ywraq_order_action",current_user_id:ywraq_frontend.current_user_id,context:"frontend",ywraq_order_action:"mail_sent_order_created"},success:function(e){""!=e.rqa_url&&(window.location.href=e.rqa_url)}})})),document.addEventListener("wpcf7mailsent",(function(e){window.location.href=ywraq_frontend.rqa_url}),!1))})),e("#yith-ywrq-table-list").on("change",".qty",(function(){e(this).val()<=0&&e(this).val(1)})),e(document).bind("gform_confirmation_loaded",(function(e,t){ywraq_frontend.gf_id==t&&(window.location.href=ywraq_frontend.rqa_url)})),o.length>0&&1==ywraq_frontend.lock_shipping&&(o.find("input").attr("readonly","readonly"),o.find("select").attr("readonly","readonly"),e(".woocommerce-checkout #shipping_country_field").css("pointer-events","none"),e(".woocommerce-checkout #shipping_state_field").css("pointer-events","none")),r.length>0&&1==ywraq_frontend.lock_billing&&(r.find("input").attr("readonly","readonly"),r.find("select").attr("readonly","readonly"),e(".woocommerce-checkout #billing_country_field").css("pointer-events","none"),e(".woocommerce-checkout #billing_state_field").css("pointer-events","none")),t.ywraq_refresh_widget(),c(),e(document).on("click","#ywraq_checkout_quote",(function(t){e(document).find('input[name="payment_method"]').val("yith-request-a-quote"),e("#ywraq_checkout_quote").val(!0)}))}));